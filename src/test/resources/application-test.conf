akka {
  actor {
    allow-java-serialization = off
    serializers {
      kryo = "io.altoo.akka.serialization.kryo.KryoSerializer"
    }
    serialization-bindings {
      "io.github.tksugimoto.akka.persistence.serialization.KryoSerializable" = kryo
    }
  }

  persistence {
    journal {
      plugin = "akka.persistence.cassandra.journal"
    }

    snapshot-store.plugin = "akka.persistence.no-snapshot-store"
    cassandra {
      journal {
        keyspace-autocreate = true
        tables-autocreate = true
      }
    }
  }

  # https://doc.akka.io/docs/akka/2.6.10/persistence-plugins.html#eager-initialization-of-persistence-plugin
  # test開始時に akka.persistence.cassandra の準備が完了しているようにするため
  extensions += "akka.persistence.Persistence"
  persistence.journal.auto-start-journals = ["akka.persistence.cassandra.journal"]
}

akka-kryo-serialization {
  id-strategy = "automatic"
   kryo-initializer = "io.github.tksugimoto.akka.persistence.serialization.KryoInit"
}

